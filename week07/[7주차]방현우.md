# 7주차 학습 내용 (CRUD API 연습)

## 이론
### REST API
자원(Resource)-URI  
행위-HTTP 메서드  
표현(Representations)
자원을 HTTP URI로 표현해 HTTP프로토콜을 통해 요청 응답 주고받는것.
HTTP프로토콜이란? 자원을 HTTP URI로 표현해 HTTP프로토콜을 통해 요청 응답 주고받는것.

#### 특징
1. 유니폼 인터페이스 - URI로 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행하는 아키텍쳐 스타일
2. 무상태성
3. 캐시가능 - HTTP라는 웹 표준을 사용하기 때문에 Last-Modified 태그나, E-tag로 캐싱구현 가능.
4. 자체표현 구조
5. Client-Server 구조
6. 계층형 구조  
  

### REST API 설계 주의 점(동사를 써도 되는 경우)
1. URI는 정보의 자원을 표현해야 함.(행위에 대한 표현X)
2. 자원에 대한 행위는 HTTP Method 로 표현한다.
3. /는 계층 관계 나타내는데 사용
4. /를 마지막에 적지 않는다.
5. 긴 URI는 -사용(_사용X)
6. 소문자로 사용.(대소문자에 따라 다른 리소스로 인식하기 때문)
7. 파일 확장자는 표현 적지 않는다.
* 연관관계가 있다면 불가피하게 동사 사용.  
* ex1) GET: /users/{userId}/devices(소유'has'의 관계를 표현할 때.)
* ex2) GET: /users/{userId}/likes/devices(관계명이 애매하거나 구체적으로 필요할 때)

### HTTP 특징  
HyperText Transfer Protocol로 거의 모든 형태의 데이터를 전송가능하다.  
- 클라이언트 서버구조 (Request Response 구조)
- 무상태 프로토콜(stateless), 비연결성 (서버가 클라이언트의 상태 보존 X, 서버자원 효율적 운용 가능)  
  - 하지만 3hand shake가 계속 일어남으로 시간이 오래걸림-> 지속연결로 해결. 
- HTTP 메시지
- 단순함, 확장 가능

### HTTP 메소드 8가지

    GET: 서버로 부터 데이터를 취득
    POST: 서버에 데이터를 추가, 작성 등
    PUT: 서버의 데이터를 갱신, 작성 등
    DELETE: 서버의 데이터를 삭제
    HEAD: 서버 리소스의 헤더(메타 데이터의 취득)
    OPTIONS: 리소스가 지원하고 있는 메소드의 취득
    PATCH: 리소스의 일부분을 수정
    CONNECT: 프록시 동작의 터널 접속을 변경  

PUT은 지정한 데이터를 전부 수정하는 메서드(멱등)
PATCH는 정보의 일부분만 변경하는 메서드(멱등X)
* 멱등(idempotent): 호출로 인하여 데이터가 변형되지 않는 것.

### DB
#### 정규화 3단계
정규화란? ERD내 중복 요소를 찾아 제거해 나가는 과정. 

**제1 정규화**  
같은 성격과 내용의 컬럼이 연속적으로 나타나는 컬럼이 존재 할 때
해당하는 컬럼 제거하고 기본테이블의 PK(기본키)를 추가해 새로운 테이블을 생성하고,
기존 테이블과 1:N 관계 형성.

**제2 정규화**  
PK가 여러 키로 구성된 복합키로 구성된 경우. 복합키 전체에 의존하지 않고 복합키의 일부분에만 종속되는 속성들이 존재할 경우
이를 분리하는 것.

**제3 정규화**  
실제로는 기본키가 아닌 다른 일반 컬럼에 의존하는 컬럼들을 분리.



## 1. **User 엔터티 관련 API**

### 1.1 회원 가입

- **URL**: `POST /members`
- **설명**: 새로운 사용자를 등록합니다.
- **Request Body**:
    
    ```json
    
    {
      "username": "john_doe",
      "email": "john@example.com",
      "password": "password123"
    }
    
    ```
  ![스크린샷 2024-11-13 000640](https://github.com/user-attachments/assets/4cc798a4-733a-4faf-a16c-20c37798c69c)

### 1.2 사용자 정보 조회

- **URL**: `GET /members/{id}`
- **설명**: 특정 사용자 정보를 조회합니다.
- **Response 예시**:
    
    ```json
    
    {
      "id": 1,
      "username": "john_doe",
      "email": "john@example.com"
    }
    
    ```
  ![스크린샷 2024-11-13 000708](https://github.com/user-attachments/assets/56b75798-8f80-45c2-9d1e-869cff9eb403)

### 1.3 사용자 정보 업데이트

- **URL**: `PUT /members/{id}`
- **설명**: 특정 사용자의 프로필 정보를 업데이트합니다.
- **Request Body**:
    
    ```json
    
    {
      "username": "john_doe_updated",
      "email": "new_email@example.com"
    }
    
    ```
  ![스크린샷 2024-11-13 000730](https://github.com/user-attachments/assets/335ef5e7-46b7-47f8-9ef2-610519f5e6f2)
  ![스크린샷 2024-11-13 000751](https://github.com/user-attachments/assets/785130e4-3e7d-4f03-8903-cd65eefedb08)
### 1.4 사용자 삭제

- **URL**: `DELETE /members/{id}`
- **설명**: 특정 사용자를 삭제합니다.
  ![스크린샷 2024-11-13 000833](https://github.com/user-attachments/assets/cee4c73f-3aa2-419e-901e-e8ca8f7e9eb5)
---

## 2. **Post 엔터티 관련 API**

### 2.1 게시글 작성

- **URL**: `POST /posts`
- **설명**: 새로운 게시글을 작성합니다.
- **Request Body**:
    
    ```json
    
    {
      "title": "My First Post",
      "content": "This is the content of the post.",
      "userId": 1
    }
    
    ```
  ![스크린샷 2024-11-13 000911](https://github.com/user-attachments/assets/c0e2ecb6-9d78-41e9-ab28-2520b279c333)

### 2.2 게시글 목록 조회

- **URL**: `GET /posts`
- **설명**: 모든 게시글 목록을 조회합니다.
- **Response 예시**:
    
    ```json
    
    [
      {
        "id": 1,
        "title": "My First Post",
        "content": "This is the content of the post.",
        "userId": 1
      },
      {
        "id": 2,
        "title": "Another Post",
        "content": "Some other content.",
        "userId": 2
      }
    ]
    
    ```
  ![스크린샷 2024-11-13 000947](https://github.com/user-attachments/assets/7cd21ce7-0d00-497d-ba4a-96cb26779bce)

### 2.3 특정 게시글 조회

- **URL**: `GET /posts/{id}`
- **설명**: 특정 게시글을 조회합니다.
- **Response 예시**:
    
    ```json
    
    {
      "id": 1,
      "title": "My First Post",
      "content": "This is the content of the post.",
      "userId": 1
    }
    
    ```
  ![스크린샷 2024-11-13 000958](https://github.com/user-attachments/assets/c17c3bc8-b349-4a93-8121-6e04d03c2377)

### 2.4 게시글 수정

- **URL**: `PUT /posts/{id}`
- **설명**: 특정 게시글의 내용을 수정합니다.
- **Request Body**:
    
    ```json
    
    {
      "title": "Updated Title",
      "content": "Updated content"
    }
    
    ```
  ![스크린샷 2024-11-13 001025](https://github.com/user-attachments/assets/21bc5016-ed3e-461d-bb40-1258bcb2c407)
  ![스크린샷 2024-11-13 001035](https://github.com/user-attachments/assets/f7abe238-d00b-4736-978a-d2065b08354f)

### 2.5 게시글 삭제

- **URL**: `DELETE /posts/{id}`
- **설명**: 특정 게시글을 삭제합니다.
  ![스크린샷 2024-11-13 001047](https://github.com/user-attachments/assets/3df1d3a9-3eb7-4f2d-8be5-2bfdc0a233bc)
  ![스크린샷 2024-11-13 001100](https://github.com/user-attachments/assets/ef257b98-550b-44ec-aa97-6c46b8d01369)
---

## 3. **Comment 엔터티 관련 API**

### 3.1 댓글 작성

- **URL**:
- **설명**: 특정 게시글에 댓글을 작성합니다.
- **Request Body**:
    
    ```json
    
    {
      "content": "This is a comment.",
      "userId": 1
    }
    
    ```
    

### 3.2 특정 게시글의 댓글 목록 조회

- **URL**:
- **설명**: 특정 게시글에 달린 모든 댓글을 조회합니다.
- **Response 예시**:
    
    ```json
    
    [
      {
        "id": 1,
        "content": "This is a comment.",
        "userId": 1,
        "postId": 1
      },
      {
        "id": 2,
        "content": "Another comment.",
        "userId": 2,
        "postId": 1
      }
    ]
    
    ```
    

### 3.3 댓글 수정

- **URL**:
- **설명**: 특정 댓글을 수정합니다.
- **Request Body**:
    
    ```json
    
    {
      "content": "Updated comment content"
    }
    
    ```
    

### 3.4 댓글 삭제

- **URL**:
- **설명**: 특정 댓글을 삭제합니다.

## 4. **추가 기능 API**

### 4.1 특정 사용자의 게시글 목록 조회

- **URL**: `GET /api/users/{userId}/posts`
- **설명**: 특정 사용자가 작성한 모든 게시글을 조회합니다

### 4.2 특정 사용자의 댓글 목록 조회

- **URL**:
- **설명**: 특정 사용자가 작성한 모든 게시글을 조회합니다
